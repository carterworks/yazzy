---
import type { ReadablePage } from "../types";
import { getPlainTextSummary } from "../utils";

interface Props {
  articles: ReadablePage[];
}

const { articles } = Astro.props;

const recentArticles = articles.map((article) => {
  return {
    ...article,
    summary: getPlainTextSummary(article, 30),
  };
});
---

<section class="space-y-2">
  <h2 class="font-didone text-lg">What people are reading.</h2>
  <ol class="flex-column flex flex-wrap justify-between gap-2 md:flex-row">
    {
      recentArticles.map((article) => (
        <li class="flex-auto overflow-hidden rounded border border-base-100 bg-paper p-2 transition hover:bg-base-50 md:w-60 lg:w-40 dark:border-base-900 dark:bg-black hover:dark:bg-base-950">
          <a href={`/${article.url}`}>
            <h3 class="font-didone">{article.title}</h3>
            <p class="my-1 truncate text-xs">{new URL(article.url).hostname}</p>
            <p class="text-xs">{article.summary}</p>
          </a>
        </li>
      ))
    }
  </ol>
</section>
